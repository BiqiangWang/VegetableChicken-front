"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_virtual/_tslib.js"),t=require("./load-plugins.js"),r=require("./mixins/mixins.js"),o=require("./utils/amap-helpers.js"),s=require("./mixins/props.js"),i=require("./mixins/base.js"),a=require("./marker.js"),n=require("./circle.js"),p=require("./polygon.js"),u=require("./polyline.js"),l=require("./rectangle.js"),c=a.default.sealedOptions,d=u.default.sealedOptions,h=p.default.sealedOptions,m=l.default.sealedOptions,g=n.default.sealedOptions,f=r.default(i.default).extend({amapMeta:{prepare:function(){return t.default("AMap.MouseTool")},initComponent:function(t){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,new t.MouseTool(this.$map)]}))}))},add:function(){},remove:function(){}},props:{mode:s.defineProp({type:String,default:"none"}),clearWhenClose:{type:Boolean,default:!0},options:{type:Object}},data:function(){return{drawingMode:void 0}},computed:{$mousetool:function(){return this.$target}},methods:{close:function(e){this.$mousetool.close(e)},draw:function(){var e=this.$mousetool,t=this.mode;if(t!==this.drawingMode){switch(t){case"none":this.close(this.clearWhenClose);break;case"marker":e.marker(o.getOptionsFromProps(this,c.props,this.options||{}));break;case"polyline":e.polyline(o.getOptionsFromProps(this,d.props,this.options||{}));break;case"polygon":e.polygon(o.getOptionsFromProps(this,h.props,this.options||{}));break;case"rectangle":e.rectangle(o.getOptionsFromProps(this,m.props,this.options||{}));break;case"circle":e.circle(o.getOptionsFromProps(this,g.props,this.options||{}));break;case"rule":e.rule(o.getOptionsFromProps(this,h.props,this.options||{}));break;case"measureArea":e.measureArea(o.getOptionsFromProps(this,h.props,this.options||{}));break;case"rectZoomIn":e.rectZoomIn(o.getOptionsFromProps(this,h.props,this.options||{}));break;case"rectZoomOut":e.rectZoomOut(o.getOptionsFromProps(this,h.props,this.options||{}))}this.drawingMode=t}},_onDraw:function(e){if(this.mode!==this.drawingMode)return this.close(!0),void this.draw();var t=e.obj,r=this.drawingMode,s=t;switch(r){case"marker":s=o.lngLat2Array(t.getPosition());break;case"polyline":case"polygon":s=o.path2Array(t.getPath());break;case"rectangle":s=o.bounds2Array(t.getBounds());break;case"circle":s={center:o.lngLat2Array(t.getCenter()),radius:t.getRadius()};break;case"rule":s={path:o.path2Array(t.getPath()),length:t.getLength()};break;case"measureArea":s={path:o.path2Array(t.getPath()),area:t.getArea()}}this.$emit("draw",r,s),this.$emit("update:mode","none")}},mounted:function(){return e.__awaiter(this,void 0,void 0,(function(){var t,r=this;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,(t=this.$context).ready];case 1:return e.sent(),t.destroyed?[2]:(this.$mousetool.on("draw",this._onDraw),this.$watch("mode",(function(e){"none"!==e&&"none"!==r.drawingMode&&r.close(!0),r.draw()}),{immediate:!0}),[2])}}))}))}});exports.default=f;

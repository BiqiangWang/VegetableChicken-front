{"remainingRequest":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\src\\components\\ExpressInfo.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\src\\components\\ExpressInfo.vue","mtime":1609664309815},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\css-loader\\index.js","mtime":1607155402379},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1607155434865},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\postcss-loader\\src\\index.js","mtime":1607155438408},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607155416346},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\vue-loader\\lib\\index.js","mtime":1607155434827}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.main {\n  margin: 0 auto;\n  margin-top: 70px;\n  width: 1000px;\n  height: 800px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n}\n\n.map {\n  width: 400px;\n  height: 400px;\n}\n\n.map-collect {\n  float: left;\n  margin-top: 200px;\n}\n\n.amap-copyright {\n  color: grey;\n}\n\n.info-box {\n  float: right;\n  width: 500px;\n  height: 700px;\n  border: 10px solid blue;\n  border-radius: 30px;\n  overflow-y: scroll;\n}\n\n.code {\n  margin-top: 50px;\n  margin-left: 20px;\n  font-weight: bold;\n}\n\n.info {\n  margin-top: 50px;\n  margin-left: 20px;\n}\n\n.time {\n  text-align: center;\n}\n\n.date {\n  font-size: 10px;\n  color: gray;\n  text-align: center;\n  margin-top: 10px;\n}\n\n.main-info {\n  text-align: left;\n  margin-top: -20px;\n}\n\n.collect {\n  margin-top: 20px;\n  margin-left: 125px;\n}\n",{"version":3,"sources":["ExpressInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuVA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ExpressInfo.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"main\" id=\"app\">\n    <div class=\"map-collect\">\n      <div id=\"container\" class=\"map\" tabindex=\"0\"></div>\n\n      <el-button class=\"collect\" v-if=\"isCollect === 0\" @click=\"collect\"\n        >收藏此快递</el-button\n      >\n      <el-button\n        type=\"danger\"\n        plain\n        class=\"collect\"\n        v-if=\"isCollect === 1\"\n        @click=\"cancelCollect\"\n        >取消收藏</el-button\n      >\n    </div>\n    <div class=\"info-box\">\n      <div class=\"code\">\n        快递单号：{{ id }} &emsp; 快递公司：{{ expresscompany }}\n      </div>\n      <div class=\"code\" style=\"margin-top: 30px\">\n        快递状态：{{ expressStatus }}\n      </div>\n      <el-container class=\"info\" v-for=\"message in messages\">\n        <el-aside style=\"width: 100px\">\n          <div class=\"time\">{{ message.time.time }}</div>\n          <div class=\"date\">{{ message.time.date }}</div>\n        </el-aside>\n        <el-main class=\"main-info\" style=\"width: 500px\">\n          {{ message.info }}\n        </el-main>\n      </el-container>\n    </div>\n  </div>\n</template>\n\n<script language=\"javascript\" src=\"https://webapi.amap.com/maps?v=1.4.15&key=84c113b753854d2a372345f043cb50c2&plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar,AMap.Geocoder\"></script>\n<script src=\"https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js\"></script>\n\n<script>\nexport default {\n  data() {\n    return {\n      sign: 0,\n      userid: 1,\n      length: 0,\n      center: [108.152601, 30.193629],\n      path: [],\n      markerList: [],\n      map: \"\",\n      geocoder: \"\",\n      polyline: \"\",\n      status: [],\n      expressStatus: \"\",\n      isCollect: 0,\n      id: \"11111111111111111111111\",\n      expresscompany: \"\",\n      messages: [],\n      address: [\"北京市朝阳区阜荣街10号\"],\n\n      response: {\n        Traces: [\n          {\n            AcceptStation: \"【山东省市场部中心】 已收件 取件人。。\",\n            AcceptTime: \"2020-12-10 21:00:53\",\n          },\n          {\n            AcceptStation: \"【济南转运中心公司】 已收件 取件人。。\",\n            AcceptTime: \"2020-12-11 18:00:53\",\n          },\n          {\n            AcceptStation: \"【浦东转运中心公司】 已收件 取件人。。\",\n            AcceptTime: \"2020-12-11 21:00:53\",\n          },\n        ],\n      },\n    };\n  },\n\n  methods: {\n    getQuery: function () {\n      this.id = this.$route.query.ExpressInfoExpressid;\n      this.expresscompany = this.$route.query.ExpressInfoExpressCompany;\n    },\n\n    geoCode(address, i) {\n      this.geocoder.getLocation(address, (status, result) => {\n        if (status === \"complete\" && result.geocodes.length) {\n          var lnglat = result.geocodes[0].location;\n          var temp = [lnglat.lng, lnglat.lat];\n          this.path.push(temp);\n\n          // this.polyline.setPath(this.path);\n\n          var marker = new AMap.Marker();\n          marker.setPosition(lnglat);\n          this.markerList.push(marker);\n          this.map.add(marker);\n        } else {\n          console.log(\"根据地址查询位置失败\");\n          this.length--;\n        }\n        if (this.path.length == this.length && i == this.address.length - 1) {\n          this.polyline.setPath(this.path);\n          this.map.setFitView([this.polyline]);\n        }\n        if (i < this.address.length - 1) {\n          this.geoCode(this.address[i + 1], i + 1);\n        }\n      });\n    },\n\n    processData() {\n      switch (this.response.State) {\n        case \"0\":\n          break;\n        case \"1\":\n          this.expressStatus = \"未发货\";\n          break;\n        case \"2\":\n          this.expressStatus = \"运输中\";\n          break;\n        case \"3\":\n          this.expressStatus = \"已签收\";\n          break;\n        case \"4\":\n          break;\n      }\n      for (var i = 0; i < this.response.Traces.length; i++) {\n        var str = \"\";\n        for (var j = 0; j < this.response.Traces[i].AcceptStation.length; j++) {\n          if (\n            this.response.Traces[i].AcceptStation[j] !== \"【\" &&\n            this.response.Traces[i].AcceptStation[j] !== \"】\"\n          ) {\n            str += this.response.Traces[i].AcceptStation[j];\n          }\n          if (this.response.Traces[i].AcceptStation[j] === \"】\") {\n            break;\n          }\n        }\n        this.address[i] = str;\n\n        this.messages[i] = {\n          time: {\n            time: \"\",\n            date: \"\",\n          },\n          info: \"\",\n        };\n\n        var date = this.response.Traces[i].AcceptTime.split(\" \");\n        this.messages[i].time.date = date[0];\n        this.messages[i].time.time = date[1];\n        this.messages[i].info = this.response.Traces[i].AcceptStation;\n        this.id = this.response.LogisticCode;\n\n        this.$set(this.messages);\n      }\n\n      this.messages.reverse();\n\n      // for (var i = 0; i < this.address.length; i++) {\n      //     this.status[i] = false;\n      // }\n\n      this.length = this.address.length;\n\n      // for (var i = 0; i < this.address.length; i++) {\n      //   // console.log(this.address[i]);\n      //   // setTimeout(()=>{this.geoCode(this.address[i], i)},100*i);\n      //   this.geoCode(this.address[i], i);\n      // }\n      this.geoCode(this.address[0], 0);\n    },\n\n    getInfo(num, id) {\n      var url = \"http://localhost:8020/search/search\";\n      this.$http\n        .get(\n          url,\n          {\n            params: {\n              num: num,\n              cid: id,\n            },\n          },\n          {\n            emulateJSON: true,\n          }\n        )\n        .then((response) => {\n          this.response = response.data;\n          console.log(response);\n          if (this.response.Success == true) {\n            this.processData();\n          } else {\n            this.$alert(\n              \"无法根据您提供的单号搜索到快递，请检查单号是否输入正确！\",\n              \"搜索失败\",\n              {\n                confirmButtonText: \"确定\",\n                callback: (action) => {\n                  this.$router.push({ path: \"/SearchExpress\" });\n                },\n              }\n            );\n          }\n        });\n    },\n\n    iscollect() {\n      var url = \"http://localhost:8705/express/ismyexpress\";\n      this.$http\n        .get(\n          url,\n          {\n            params: {\n              expressid: this.id,\n              userid: this.userid,\n            },\n          },\n          {\n            emulateJSON: true,\n          }\n        )\n        .then((response) => {\n          this.isCollect = response.data;\n        });\n    },\n\n    collect() {\n      var url = \"http://localhost:8705/express/addexpress\";\n      console.log(this.messages[0].info);\n      this.$http\n        .get(\n          url,\n          {\n            params: {\n              companyid: this.expresscompany,\n              expressdetail: this.messages[0].info,\n              expressid: this.id,\n              expressstatus: this.expressStatus,\n              userid: this.userid,\n            },\n          },\n          {\n            emulateJSON: true,\n          }\n        )\n        .then((response) => {\n          if (response.data === 1) {\n            this.$message({\n              showClose: true,\n              message: \"收藏成功！\",\n              type: \"success\",\n            });\n            this.isCollect = 1;\n          } else if (response.data === 0) {\n            this.$message({\n              showClose: true,\n              message: \"收藏失败！\",\n              type: \"erro\",\n            });\n          }\n        });\n    },\n\n    cancelCollect() {\n      var url = \"http://localhost:8705/express/deleteexpress\";\n      this.$http\n        .get(\n          url,\n          {\n            params: {\n              expressid: this.id,\n              userid: this.userid,\n            },\n          },\n          {\n            emulateJSON: true,\n          }\n        )\n        .then((response) => {\n          if (response.data === 1) {\n            this.$message({\n              showClose: true,\n              message: \"取消收藏成功！\",\n              type: \"success\",\n            });\n            this.isCollect = 0;\n          } else if (response.data === 0) {\n            this.$message({\n              showClose: true,\n              message: \"取消收藏失败！\",\n              type: \"erro\",\n            });\n          }\n        });\n    },\n  },\n  mounted() {\n    this.map = new AMap.Map(\"container\", {\n      /*showIndoorMap: false,\n                          isHotspot: false,\n                          zoomEnable: true,\n                          keyboardEnable: false,\n                          dragEnable: true,\n                          showLabel: false,\n                          touchZoomCenter: 1,*/\n      zoom: 3,\n      center: [108.152601, 30.193629],\n    });\n    this.geocoder = new AMap.Geocoder({});\n\n    this.polyline = new AMap.Polyline({\n      path: [],\n      isOutline: true,\n      outlineColor: \"#ffeeff\",\n      borderWeight: 3,\n      strokeColor: \"#3366FF\",\n      strokeOpacity: 1,\n      strokeWeight: 3,\n      // 折线样式还支持 'dashed'\n      strokeStyle: \"solid\",\n      // strokeStyle是dashed时有效\n      strokeDasharray: [10, 5],\n      lineJoin: \"round\",\n      lineCap: \"round\",\n      zIndex: 50,\n    });\n    this.polyline.setMap(this.map);\n    this.getQuery();\n\n    this.getInfo(this.id, this.expresscompany);\n\n    this.iscollect();\n  },\n};\n</script>\n\n<style>\n.main {\n  margin: 0 auto;\n  margin-top: 70px;\n  width: 1000px;\n  height: 800px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n}\n\n.map {\n  width: 400px;\n  height: 400px;\n}\n\n.map-collect {\n  float: left;\n  margin-top: 200px;\n}\n\n.amap-copyright {\n  color: grey;\n}\n\n.info-box {\n  float: right;\n  width: 500px;\n  height: 700px;\n  border: 10px solid blue;\n  border-radius: 30px;\n  overflow-y: scroll;\n}\n\n.code {\n  margin-top: 50px;\n  margin-left: 20px;\n  font-weight: bold;\n}\n\n.info {\n  margin-top: 50px;\n  margin-left: 20px;\n}\n\n.time {\n  text-align: center;\n}\n\n.date {\n  font-size: 10px;\n  color: gray;\n  text-align: center;\n  margin-top: 10px;\n}\n\n.main-info {\n  text-align: left;\n  margin-top: -20px;\n}\n\n.collect {\n  margin-top: 20px;\n  margin-left: 125px;\n}\n</style>\n"]}]}
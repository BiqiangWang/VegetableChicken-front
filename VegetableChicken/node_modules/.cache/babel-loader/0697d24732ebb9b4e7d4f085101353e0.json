{"remainingRequest":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\babel-loader\\lib\\index.js!E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\src\\components\\ExpressInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\src\\components\\ExpressInfo.vue","mtime":1609691296384},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607155416346},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\babel-loader\\lib\\index.js","mtime":1607155439225},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607155416346},{"path":"E:\\大学学习\\大三上\\web与SOA\\web服务前端\\VegetableChicken\\node_modules\\vue-loader\\lib\\index.js","mtime":1607155434827}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      first: 0,\n      sign: 0,\n      userid: 1,\n      length: 0,\n      center: [108.152601, 30.193629],\n      path: [],\n      markerList: [],\n      map: \"\",\n      geocoder: \"\",\n      polyline: \"\",\n      status: [],\n      expressStatus: \"\",\n      isCollect: 0,\n      id: \"11111111111111111111111\",\n      expresscompany: \"\",\n      messages: [],\n      address: [\"北京市朝阳区阜荣街10号\"],\n      response: {\n        Traces: [{\n          AcceptStation: \"【山东省市场部中心】 已收件 取件人。。\",\n          AcceptTime: \"2020-12-10 21:00:53\"\n        }, {\n          AcceptStation: \"【济南转运中心公司】 已收件 取件人。。\",\n          AcceptTime: \"2020-12-11 18:00:53\"\n        }, {\n          AcceptStation: \"【浦东转运中心公司】 已收件 取件人。。\",\n          AcceptTime: \"2020-12-11 21:00:53\"\n        }]\n      }\n    };\n  },\n  methods: {\n    getid: function getid() {\n      console.log(this.$parent.userid);\n      this.userid = this.$parent.userid;\n    },\n    getQuery: function getQuery() {\n      this.id = this.$route.query.ExpressInfoExpressid;\n      this.expresscompany = this.$route.query.ExpressInfoExpressCompany;\n    },\n    geoCode: function geoCode(address, i) {\n      var _this = this;\n\n      this.geocoder.getLocation(address, function (status, result) {\n        if (status === \"complete\" && result.geocodes.length) {\n          var lnglat = result.geocodes[0].location;\n          var temp = [lnglat.lng, lnglat.lat];\n\n          _this.path.push(temp); // this.polyline.setPath(this.path);\n\n\n          var marker = new AMap.Marker();\n\n          if (_this.first == 0) {\n            marker = new AMap.Marker({\n              offset: new AMap.Pixel(-13, -30),\n              icon: new AMap.Icon({\n                image: \"//a.amap.com/jsapi_demos/static/demo-center/icons/dir-marker.png\",\n                imageSize: new AMap.Size(135, 40),\n                imageOffset: new AMap.Pixel(-9, -3)\n              })\n            });\n            _this.first++;\n          }\n\n          marker.setPosition(lnglat);\n\n          _this.markerList.push(marker);\n\n          _this.map.add(marker);\n        } else {\n          console.log(\"根据地址查询位置失败\");\n          _this.length--;\n        }\n\n        if (_this.path.length == _this.length && i == _this.address.length - 1) {\n          _this.polyline.setPath(_this.path);\n\n          _this.map.setFitView([_this.polyline]);\n        }\n\n        if (i < _this.address.length - 1) {\n          _this.geoCode(_this.address[i + 1], i + 1);\n        }\n      });\n    },\n    processData: function processData() {\n      switch (this.response.State) {\n        case \"0\":\n          break;\n\n        case \"1\":\n          this.expressStatus = \"未发货\";\n          break;\n\n        case \"2\":\n          this.expressStatus = \"运输中\";\n          break;\n\n        case \"3\":\n          this.expressStatus = \"已签收\";\n          break;\n\n        case \"4\":\n          break;\n      }\n\n      for (var i = 0; i < this.response.Traces.length; i++) {\n        var str = \"\";\n\n        for (var j = 0; j < this.response.Traces[i].AcceptStation.length; j++) {\n          if (this.response.Traces[i].AcceptStation[j] !== \"【\" && this.response.Traces[i].AcceptStation[j] !== \"】\") {\n            str += this.response.Traces[i].AcceptStation[j];\n          }\n\n          if (this.response.Traces[i].AcceptStation[j] === \"】\") {\n            break;\n          }\n        }\n\n        this.address[i] = str;\n        this.messages[i] = {\n          time: {\n            time: \"\",\n            date: \"\"\n          },\n          info: \"\"\n        };\n        var date = this.response.Traces[i].AcceptTime.split(\" \");\n\n        if (i == this.response.Traces.length - 1) {\n          this.messages[i].color = \"#0bbd87\";\n        } else {\n          this.messages[i].color = \"\";\n        }\n\n        this.messages[i].time.date = date[0];\n        this.messages[i].time.time = date[1];\n        this.messages[i].info = this.response.Traces[i].AcceptStation;\n        this.id = this.response.LogisticCode;\n        this.$set(this.messages);\n      }\n\n      this.messages.reverse(); // for (var i = 0; i < this.address.length; i++) {\n      //     this.status[i] = false;\n      // }\n\n      this.length = this.address.length; // for (var i = 0; i < this.address.length; i++) {\n      //   // console.log(this.address[i]);\n      //   // setTimeout(()=>{this.geoCode(this.address[i], i)},100*i);\n      //   this.geoCode(this.address[i], i);\n      // }\n\n      this.geoCode(this.address[0], 0);\n    },\n    getInfo: function getInfo(num, id) {\n      var _this2 = this;\n\n      var url = \"http://localhost:8020/search/search\";\n      this.$http.get(url, {\n        params: {\n          num: num,\n          cid: id\n        }\n      }, {\n        emulateJSON: true\n      }).then(function (response) {\n        _this2.response = response.data;\n        console.log(response);\n\n        if (_this2.response.Success == true) {\n          _this2.processData();\n        } else {\n          _this2.$alert(\"无法根据您提供的单号搜索到快递，请检查单号是否输入正确！\", \"搜索失败\", {\n            confirmButtonText: \"确定\",\n            callback: function callback(action) {\n              _this2.$router.push({\n                path: \"/SearchExpress\"\n              });\n            }\n          });\n        }\n      });\n    },\n    iscollect: function iscollect() {\n      var _this3 = this;\n\n      var url = \"http://localhost:8705/express/ismyexpress\";\n      this.$http.get(url, {\n        params: {\n          expressid: this.id,\n          userid: this.userid\n        }\n      }, {\n        emulateJSON: true\n      }).then(function (response) {\n        _this3.isCollect = response.data;\n      });\n    },\n    collect: function collect() {\n      var _this4 = this;\n\n      var url = \"http://localhost:8705/express/addexpress\";\n      console.log(this.messages[0].info);\n      this.$http.get(url, {\n        params: {\n          companyid: this.expresscompany,\n          expressdetail: this.messages[0].info,\n          expressid: this.id,\n          expressstatus: this.expressStatus,\n          userid: this.userid\n        }\n      }, {\n        emulateJSON: true\n      }).then(function (response) {\n        if (response.data === 1) {\n          _this4.$message({\n            showClose: true,\n            message: \"收藏成功！\",\n            type: \"success\"\n          });\n\n          _this4.isCollect = 1;\n        } else if (response.data === 0) {\n          _this4.$message({\n            showClose: true,\n            message: \"收藏失败！\",\n            type: \"erro\"\n          });\n        }\n      });\n    },\n    cancelCollect: function cancelCollect() {\n      var _this5 = this;\n\n      var url = \"http://localhost:8705/express/deleteexpress\";\n      this.$http.get(url, {\n        params: {\n          expressid: this.id,\n          userid: this.userid\n        }\n      }, {\n        emulateJSON: true\n      }).then(function (response) {\n        if (response.data === 1) {\n          _this5.$message({\n            showClose: true,\n            message: \"取消收藏成功！\",\n            type: \"success\"\n          });\n\n          _this5.isCollect = 0;\n        } else if (response.data === 0) {\n          _this5.$message({\n            showClose: true,\n            message: \"取消收藏失败！\",\n            type: \"erro\"\n          });\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.map = new AMap.Map(\"container\", {\n      /*showIndoorMap: false,\n                          isHotspot: false,\n                          zoomEnable: true,\n                          keyboardEnable: false,\n                          dragEnable: true,\n                          showLabel: false,\n                          touchZoomCenter: 1,*/\n      zoom: 3,\n      center: [108.152601, 30.193629]\n    });\n    this.geocoder = new AMap.Geocoder({});\n    this.polyline = new AMap.Polyline({\n      path: [],\n      isOutline: true,\n      outlineColor: \"#ffeeff\",\n      borderWeight: 3,\n      strokeColor: \"#3366FF\",\n      strokeOpacity: 1,\n      strokeWeight: 3,\n      // 折线样式还支持 'dashed'\n      strokeStyle: \"solid\",\n      // strokeStyle是dashed时有效\n      strokeDasharray: [10, 5],\n      lineJoin: \"round\",\n      lineCap: \"round\",\n      zIndex: 50\n    });\n    this.polyline.setMap(this.map);\n    this.getQuery();\n    this.getid(); //this.getInfo(this.id, this.expresscompany);\n\n    this.processData();\n    this.iscollect();\n  }\n};",{"version":3,"sources":["ExpressInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,CADA;AAEA,MAAA,IAAA,EAAA,CAFA;AAGA,MAAA,MAAA,EAAA,CAHA;AAIA,MAAA,MAAA,EAAA,CAJA;AAKA,MAAA,MAAA,EAAA,CAAA,UAAA,EAAA,SAAA,CALA;AAMA,MAAA,IAAA,EAAA,EANA;AAOA,MAAA,UAAA,EAAA,EAPA;AAQA,MAAA,GAAA,EAAA,EARA;AASA,MAAA,QAAA,EAAA,EATA;AAUA,MAAA,QAAA,EAAA,EAVA;AAWA,MAAA,MAAA,EAAA,EAXA;AAYA,MAAA,aAAA,EAAA,EAZA;AAaA,MAAA,SAAA,EAAA,CAbA;AAcA,MAAA,EAAA,EAAA,yBAdA;AAeA,MAAA,cAAA,EAAA,EAfA;AAgBA,MAAA,QAAA,EAAA,EAhBA;AAiBA,MAAA,OAAA,EAAA,CAAA,cAAA,CAjBA;AAmBA,MAAA,QAAA,EAAA;AACA,QAAA,MAAA,EAAA,CACA;AACA,UAAA,aAAA,EAAA,sBADA;AAEA,UAAA,UAAA,EAAA;AAFA,SADA,EAKA;AACA,UAAA,aAAA,EAAA,sBADA;AAEA,UAAA,UAAA,EAAA;AAFA,SALA,EASA;AACA,UAAA,aAAA,EAAA,sBADA;AAEA,UAAA,UAAA,EAAA;AAFA,SATA;AADA;AAnBA,KAAA;AAoCA,GAtCA;AAwCA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,OAAA,CAAA,MAAA;AACA,WAAA,MAAA,GAAA,KAAA,OAAA,CAAA,MAAA;AACA,KAJA;AAKA,IAAA,QAAA,EAAA,oBAAA;AACA,WAAA,EAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,oBAAA;AACA,WAAA,cAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,yBAAA;AACA,KARA;AAUA,IAAA,OAVA,mBAUA,OAVA,EAUA,CAVA,EAUA;AAAA;;AACA,WAAA,QAAA,CAAA,WAAA,CAAA,OAAA,EAAA,UAAA,MAAA,EAAA,MAAA,EAAA;AACA,YAAA,MAAA,KAAA,UAAA,IAAA,MAAA,CAAA,QAAA,CAAA,MAAA,EAAA;AACA,cAAA,MAAA,GAAA,MAAA,CAAA,QAAA,CAAA,CAAA,EAAA,QAAA;AACA,cAAA,IAAA,GAAA,CAAA,MAAA,CAAA,GAAA,EAAA,MAAA,CAAA,GAAA,CAAA;;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,EAHA,CAKA;;;AAEA,cAAA,MAAA,GAAA,IAAA,IAAA,CAAA,MAAA,EAAA;;AAEA,cAAA,KAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,YAAA,MAAA,GAAA,IAAA,IAAA,CAAA,MAAA,CAAA;AACA,cAAA,MAAA,EAAA,IAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,EAAA,CADA;AAEA,cAAA,IAAA,EAAA,IAAA,IAAA,CAAA,IAAA,CAAA;AACA,gBAAA,KAAA,EACA,kEAFA;AAGA,gBAAA,SAAA,EAAA,IAAA,IAAA,CAAA,IAAA,CAAA,GAAA,EAAA,EAAA,CAHA;AAIA,gBAAA,WAAA,EAAA,IAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AAJA,eAAA;AAFA,aAAA,CAAA;AASA,YAAA,KAAA,CAAA,KAAA;AACA;;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,MAAA;;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,IAAA,CAAA,MAAA;;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,GAAA,CAAA,MAAA;AACA,SAxBA,MAwBA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,MAAA;AACA;;AACA,YAAA,KAAA,CAAA,IAAA,CAAA,MAAA,IAAA,KAAA,CAAA,MAAA,IAAA,CAAA,IAAA,KAAA,CAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,KAAA,CAAA,IAAA;;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,UAAA,CAAA,CAAA,KAAA,CAAA,QAAA,CAAA;AACA;;AACA,YAAA,CAAA,GAAA,KAAA,CAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AACA;AACA,OApCA;AAqCA,KAhDA;AAkDA,IAAA,WAlDA,yBAkDA;AACA,cAAA,KAAA,QAAA,CAAA,KAAA;AACA,aAAA,GAAA;AACA;;AACA,aAAA,GAAA;AACA,eAAA,aAAA,GAAA,KAAA;AACA;;AACA,aAAA,GAAA;AACA,eAAA,aAAA,GAAA,KAAA;AACA;;AACA,aAAA,GAAA;AACA,eAAA,aAAA,GAAA,KAAA;AACA;;AACA,aAAA,GAAA;AACA;AAbA;;AAeA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,GAAA,GAAA,EAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,aAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cACA,KAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,aAAA,CAAA,CAAA,MAAA,GAAA,IACA,KAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,aAAA,CAAA,CAAA,MAAA,GAFA,EAGA;AACA,YAAA,GAAA,IAAA,KAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,aAAA,CAAA,CAAA,CAAA;AACA;;AACA,cAAA,KAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,aAAA,CAAA,CAAA,MAAA,GAAA,EAAA;AACA;AACA;AACA;;AACA,aAAA,OAAA,CAAA,CAAA,IAAA,GAAA;AAEA,aAAA,QAAA,CAAA,CAAA,IAAA;AACA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,EAAA,EADA;AAEA,YAAA,IAAA,EAAA;AAFA,WADA;AAKA,UAAA,IAAA,EAAA;AALA,SAAA;AAQA,YAAA,IAAA,GAAA,KAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AAEA,YAAA,CAAA,IAAA,KAAA,QAAA,CAAA,MAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,QAAA,CAAA,CAAA,EAAA,KAAA,GAAA,SAAA;AACA,SAFA,MAEA;AACA,eAAA,QAAA,CAAA,CAAA,EAAA,KAAA,GAAA,EAAA;AACA;;AAEA,aAAA,QAAA,CAAA,CAAA,EAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,CAAA,CAAA;AACA,aAAA,QAAA,CAAA,CAAA,EAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,CAAA,CAAA;AACA,aAAA,QAAA,CAAA,CAAA,EAAA,IAAA,GAAA,KAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,aAAA;AACA,aAAA,EAAA,GAAA,KAAA,QAAA,CAAA,YAAA;AAEA,aAAA,IAAA,CAAA,KAAA,QAAA;AACA;;AAEA,WAAA,QAAA,CAAA,OAAA,GAvDA,CAyDA;AACA;AACA;;AAEA,WAAA,MAAA,GAAA,KAAA,OAAA,CAAA,MAAA,CA7DA,CA+DA;AACA;AACA;AACA;AACA;;AACA,WAAA,OAAA,CAAA,KAAA,OAAA,CAAA,CAAA,CAAA,EAAA,CAAA;AACA,KAvHA;AAyHA,IAAA,OAzHA,mBAyHA,GAzHA,EAyHA,EAzHA,EAyHA;AAAA;;AACA,UAAA,GAAA,GAAA,qCAAA;AACA,WAAA,KAAA,CACA,GADA,CAEA,GAFA,EAGA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,GAAA,EAAA,GADA;AAEA,UAAA,GAAA,EAAA;AAFA;AADA,OAHA,EASA;AACA,QAAA,WAAA,EAAA;AADA,OATA,EAaA,IAbA,CAaA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,OAAA,IAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,CAAA,MAAA,CACA,8BADA,EAEA,MAFA,EAGA;AACA,YAAA,iBAAA,EAAA,IADA;AAEA,YAAA,QAAA,EAAA,kBAAA,MAAA,EAAA;AACA,cAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eAAA;AACA;AAJA,WAHA;AAUA;AACA,OA9BA;AA+BA,KA1JA;AA4JA,IAAA,SA5JA,uBA4JA;AAAA;;AACA,UAAA,GAAA,GAAA,2CAAA;AACA,WAAA,KAAA,CACA,GADA,CAEA,GAFA,EAGA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,SAAA,EAAA,KAAA,EADA;AAEA,UAAA,MAAA,EAAA,KAAA;AAFA;AADA,OAHA,EASA;AACA,QAAA,WAAA,EAAA;AADA,OATA,EAaA,IAbA,CAaA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAfA;AAgBA,KA9KA;AAgLA,IAAA,OAhLA,qBAgLA;AAAA;;AACA,UAAA,GAAA,GAAA,0CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA,CAAA,CAAA,EAAA,IAAA;AACA,WAAA,KAAA,CACA,GADA,CAEA,GAFA,EAGA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,SAAA,EAAA,KAAA,cADA;AAEA,UAAA,aAAA,EAAA,KAAA,QAAA,CAAA,CAAA,EAAA,IAFA;AAGA,UAAA,SAAA,EAAA,KAAA,EAHA;AAIA,UAAA,aAAA,EAAA,KAAA,aAJA;AAKA,UAAA,MAAA,EAAA,KAAA;AALA;AADA,OAHA,EAYA;AACA,QAAA,WAAA,EAAA;AADA,OAZA,EAgBA,IAhBA,CAgBA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,SAAA,EAAA,IADA;AAEA,YAAA,OAAA,EAAA,OAFA;AAGA,YAAA,IAAA,EAAA;AAHA,WAAA;;AAKA,UAAA,MAAA,CAAA,SAAA,GAAA,CAAA;AACA,SAPA,MAOA,IAAA,QAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,SAAA,EAAA,IADA;AAEA,YAAA,OAAA,EAAA,OAFA;AAGA,YAAA,IAAA,EAAA;AAHA,WAAA;AAKA;AACA,OA/BA;AAgCA,KAnNA;AAqNA,IAAA,aArNA,2BAqNA;AAAA;;AACA,UAAA,GAAA,GAAA,6CAAA;AACA,WAAA,KAAA,CACA,GADA,CAEA,GAFA,EAGA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,SAAA,EAAA,KAAA,EADA;AAEA,UAAA,MAAA,EAAA,KAAA;AAFA;AADA,OAHA,EASA;AACA,QAAA,WAAA,EAAA;AADA,OATA,EAaA,IAbA,CAaA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,SAAA,EAAA,IADA;AAEA,YAAA,OAAA,EAAA,SAFA;AAGA,YAAA,IAAA,EAAA;AAHA,WAAA;;AAKA,UAAA,MAAA,CAAA,SAAA,GAAA,CAAA;AACA,SAPA,MAOA,IAAA,QAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,SAAA,EAAA,IADA;AAEA,YAAA,OAAA,EAAA,SAFA;AAGA,YAAA,IAAA,EAAA;AAHA,WAAA;AAKA;AACA,OA5BA;AA6BA;AApPA,GAxCA;AA8RA,EAAA,OA9RA,qBA8RA;AACA,SAAA,GAAA,GAAA,IAAA,IAAA,CAAA,GAAA,CAAA,WAAA,EAAA;AACA;;;;;;;AAOA,MAAA,IAAA,EAAA,CARA;AASA,MAAA,MAAA,EAAA,CAAA,UAAA,EAAA,SAAA;AATA,KAAA,CAAA;AAWA,SAAA,QAAA,GAAA,IAAA,IAAA,CAAA,QAAA,CAAA,EAAA,CAAA;AACA,SAAA,QAAA,GAAA,IAAA,IAAA,CAAA,QAAA,CAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA,IAFA;AAGA,MAAA,YAAA,EAAA,SAHA;AAIA,MAAA,YAAA,EAAA,CAJA;AAKA,MAAA,WAAA,EAAA,SALA;AAMA,MAAA,aAAA,EAAA,CANA;AAOA,MAAA,YAAA,EAAA,CAPA;AAQA;AACA,MAAA,WAAA,EAAA,OATA;AAUA;AACA,MAAA,eAAA,EAAA,CAAA,EAAA,EAAA,CAAA,CAXA;AAYA,MAAA,QAAA,EAAA,OAZA;AAaA,MAAA,OAAA,EAAA,OAbA;AAcA,MAAA,MAAA,EAAA;AAdA,KAAA,CAAA;AAgBA,SAAA,QAAA,CAAA,MAAA,CAAA,KAAA,GAAA;AACA,SAAA,QAAA;AACA,SAAA,KAAA,GA/BA,CAgCA;;AACA,SAAA,WAAA;AACA,SAAA,SAAA;AACA;AAjUA,CAAA","sourcesContent":["<template>\n  <div class=\"main\" id=\"app\">\n    <div class=\"map-collect\">\n      <div id=\"container\" class=\"map\" tabindex=\"0\"></div>\n\n      <el-button class=\"collect\" v-if=\"isCollect === 0\" @click=\"collect\"\n        >收藏此快递</el-button\n      >\n      <el-button\n        type=\"danger\"\n        plain\n        class=\"collect\"\n        v-if=\"isCollect === 1\"\n        @click=\"cancelCollect\"\n        >取消收藏</el-button\n      >\n    </div>\n    <div class=\"info-box\">\n      <div class=\"code\">\n        快递单号：{{ id }} &emsp; 快递公司：{{ expresscompany }}\n      </div>\n      <div class=\"code\" style=\"margin-top: 30px\">\n        快递状态：{{ expressStatus }}\n      </div>\n      <!-- <el-container class=\"info\" v-for=\"message in messages\">\n        <el-aside style=\"width: 100px\">\n          <div class=\"time\">{{ message.time.time }}</div>\n          <div class=\"date\">{{ message.time.date }}</div>\n        </el-aside>\n        <el-main class=\"main-info\" style=\"width: 500px\">\n          {{ message.info }}\n        </el-main>\n      </el-container> -->\n\n      <el-timeline style=\"margin-top: 30px; margin-right: 10px\">\n        <el-timeline-item\n          v-for=\"message in messages\"\n          :timestamp=\"message.time.date + ' ' + message.time.time\"\n          :color=\"message.color\"\n          placement=\"top\"\n        >\n          <el-card>\n            {{ message.info }}\n          </el-card>\n        </el-timeline-item>\n      </el-timeline>\n    </div>\n  </div>\n</template>\n\n<script language=\"javascript\" src=\"https://webapi.amap.com/maps?v=1.4.15&key=84c113b753854d2a372345f043cb50c2&plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar,AMap.Geocoder\"></script>\n<script src=\"https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js\"></script>\n\n<script>\nexport default {\n  data() {\n    return {\n      first:0,\n      sign: 0,\n      userid: 1,\n      length: 0,\n      center: [108.152601, 30.193629],\n      path: [],\n      markerList: [],\n      map: \"\",\n      geocoder: \"\",\n      polyline: \"\",\n      status: [],\n      expressStatus: \"\",\n      isCollect: 0,\n      id: \"11111111111111111111111\",\n      expresscompany: \"\",\n      messages: [],\n      address: [\"北京市朝阳区阜荣街10号\"],\n\n      response: {\n        Traces: [\n          {\n            AcceptStation: \"【山东省市场部中心】 已收件 取件人。。\",\n            AcceptTime: \"2020-12-10 21:00:53\",\n          },\n          {\n            AcceptStation: \"【济南转运中心公司】 已收件 取件人。。\",\n            AcceptTime: \"2020-12-11 18:00:53\",\n          },\n          {\n            AcceptStation: \"【浦东转运中心公司】 已收件 取件人。。\",\n            AcceptTime: \"2020-12-11 21:00:53\",\n          },\n        ],\n      },\n    };\n  },\n\n  methods: {\r\n\t  getid(){\r\n\t\t  console.log(this.$parent.userid);\r\n\t\t  this.userid=this.$parent.userid;\r\n\t  },\n    getQuery: function () {\n      this.id = this.$route.query.ExpressInfoExpressid;\n      this.expresscompany = this.$route.query.ExpressInfoExpressCompany;\n    },\n\n    geoCode(address, i) {\n      this.geocoder.getLocation(address, (status, result) => {\n        if (status === \"complete\" && result.geocodes.length) {\n          var lnglat = result.geocodes[0].location;\n          var temp = [lnglat.lng, lnglat.lat];\n          this.path.push(temp);\n\n          // this.polyline.setPath(this.path);\n\n          var marker = new AMap.Marker();\n\n          if (this.first == 0) {\n            marker = new AMap.Marker({\n              offset: new AMap.Pixel(-13, -30),\n              icon: new AMap.Icon({\n                image:\n                  \"//a.amap.com/jsapi_demos/static/demo-center/icons/dir-marker.png\",\n                imageSize: new AMap.Size(135, 40),\n                imageOffset: new AMap.Pixel(-9, -3),\n              }),\n            });\n            this.first++;\n          }\n          marker.setPosition(lnglat);\n          this.markerList.push(marker);\n          this.map.add(marker);\n        } else {\n          console.log(\"根据地址查询位置失败\");\n          this.length--;\n        }\n        if (this.path.length == this.length && i == this.address.length - 1) {\n          this.polyline.setPath(this.path);\n          this.map.setFitView([this.polyline]);\n        }\n        if (i < this.address.length - 1) {\n          this.geoCode(this.address[i + 1], i + 1);\n        }\n      });\n    },\n\n    processData() {\n      switch (this.response.State) {\n        case \"0\":\n          break;\n        case \"1\":\n          this.expressStatus = \"未发货\";\n          break;\n        case \"2\":\n          this.expressStatus = \"运输中\";\n          break;\n        case \"3\":\n          this.expressStatus = \"已签收\";\n          break;\n        case \"4\":\n          break;\n      }\n      for (var i = 0; i < this.response.Traces.length; i++) {\n        var str = \"\";\n        for (var j = 0; j < this.response.Traces[i].AcceptStation.length; j++) {\n          if (\n            this.response.Traces[i].AcceptStation[j] !== \"【\" &&\n            this.response.Traces[i].AcceptStation[j] !== \"】\"\n          ) {\n            str += this.response.Traces[i].AcceptStation[j];\n          }\n          if (this.response.Traces[i].AcceptStation[j] === \"】\") {\n            break;\n          }\n        }\n        this.address[i] = str;\n\n        this.messages[i] = {\n          time: {\n            time: \"\",\n            date: \"\",\n          },\n          info: \"\",\n        };\n\n        var date = this.response.Traces[i].AcceptTime.split(\" \");\n\n        if (i == this.response.Traces.length - 1) {\n          this.messages[i].color = \"#0bbd87\";\n        } else {\n          this.messages[i].color = \"\";\n        }\n\n        this.messages[i].time.date = date[0];\n        this.messages[i].time.time = date[1];\n        this.messages[i].info = this.response.Traces[i].AcceptStation;\n        this.id = this.response.LogisticCode;\n\n        this.$set(this.messages);\n      }\n\n      this.messages.reverse();\n\n      // for (var i = 0; i < this.address.length; i++) {\n      //     this.status[i] = false;\n      // }\n\n      this.length = this.address.length;\n\n      // for (var i = 0; i < this.address.length; i++) {\n      //   // console.log(this.address[i]);\n      //   // setTimeout(()=>{this.geoCode(this.address[i], i)},100*i);\n      //   this.geoCode(this.address[i], i);\n      // }\n      this.geoCode(this.address[0], 0);\n    },\n\n    getInfo(num, id) {\n      var url = \"http://localhost:8020/search/search\";\n      this.$http\n        .get(\n          url,\n          {\n            params: {\n              num: num,\n              cid: id,\n            },\n          },\n          {\n            emulateJSON: true,\n          }\n        )\n        .then((response) => {\n          this.response = response.data;\n          console.log(response);\n          if (this.response.Success == true) {\n            this.processData();\n          } else {\n            this.$alert(\n              \"无法根据您提供的单号搜索到快递，请检查单号是否输入正确！\",\n              \"搜索失败\",\n              {\n                confirmButtonText: \"确定\",\n                callback: (action) => {\n                  this.$router.push({ path: \"/SearchExpress\" });\n                },\n              }\n            );\n          }\n        });\n    },\n\n    iscollect() {\n      var url = \"http://localhost:8705/express/ismyexpress\";\n      this.$http\n        .get(\n          url,\n          {\n            params: {\n              expressid: this.id,\n              userid: this.userid,\n            },\n          },\n          {\n            emulateJSON: true,\n          }\n        )\n        .then((response) => {\n          this.isCollect = response.data;\n        });\n    },\n\n    collect() {\n      var url = \"http://localhost:8705/express/addexpress\";\n      console.log(this.messages[0].info);\n      this.$http\n        .get(\n          url,\n          {\n            params: {\n              companyid: this.expresscompany,\n              expressdetail: this.messages[0].info,\n              expressid: this.id,\n              expressstatus: this.expressStatus,\n              userid: this.userid,\n            },\n          },\n          {\n            emulateJSON: true,\n          }\n        )\n        .then((response) => {\n          if (response.data === 1) {\n            this.$message({\n              showClose: true,\n              message: \"收藏成功！\",\n              type: \"success\",\n            });\n            this.isCollect = 1;\n          } else if (response.data === 0) {\n            this.$message({\n              showClose: true,\n              message: \"收藏失败！\",\n              type: \"erro\",\n            });\n          }\n        });\n    },\n\n    cancelCollect() {\n      var url = \"http://localhost:8705/express/deleteexpress\";\n      this.$http\n        .get(\n          url,\n          {\n            params: {\n              expressid: this.id,\n              userid: this.userid,\n            },\n          },\n          {\n            emulateJSON: true,\n          }\n        )\n        .then((response) => {\n          if (response.data === 1) {\n            this.$message({\n              showClose: true,\n              message: \"取消收藏成功！\",\n              type: \"success\",\n            });\n            this.isCollect = 0;\n          } else if (response.data === 0) {\n            this.$message({\n              showClose: true,\n              message: \"取消收藏失败！\",\n              type: \"erro\",\n            });\n          }\n        });\n    },\n  },\n  mounted() {\n    this.map = new AMap.Map(\"container\", {\n      /*showIndoorMap: false,\n                          isHotspot: false,\n                          zoomEnable: true,\n                          keyboardEnable: false,\n                          dragEnable: true,\n                          showLabel: false,\n                          touchZoomCenter: 1,*/\n      zoom: 3,\n      center: [108.152601, 30.193629],\n    });\n    this.geocoder = new AMap.Geocoder({});\n    this.polyline = new AMap.Polyline({\n      path: [],\n      isOutline: true,\n      outlineColor: \"#ffeeff\",\n      borderWeight: 3,\n      strokeColor: \"#3366FF\",\n      strokeOpacity: 1,\n      strokeWeight: 3,\n      // 折线样式还支持 'dashed'\n      strokeStyle: \"solid\",\n      // strokeStyle是dashed时有效\n      strokeDasharray: [10, 5],\n      lineJoin: \"round\",\n      lineCap: \"round\",\n      zIndex: 50,\n    });\n    this.polyline.setMap(this.map);\n    this.getQuery();\r\n\tthis.getid();\n    //this.getInfo(this.id, this.expresscompany);\n    this.processData();\n    this.iscollect();\n  },\n};\n</script>\n\n<style>\n.main {\n  margin: 0 auto;\n  margin-top: 70px;\n  width: 1100px;\n  height: 800px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n}\n\n.map {\n  margin-left: 50px;\n  width: 400px;\n  height: 400px;\n}\n\n.map-collect {\n  float: left;\n  margin-top: 200px;\n}\n\n.amap-copyright {\n  color: grey;\n}\n\n.info-box {\n  float: right;\n  width: 500px;\n  height: 700px;\n  border: 10px solid #f5f8fa;\n  border-radius: 30px;\n  overflow-y: scroll;\n}\n\n.code {\n  margin-top: 50px;\n  margin-left: 20px;\n  font-weight: bold;\n}\n\n.info {\n  margin-top: 50px;\n  margin-left: 20px;\n}\n\n.time {\n  text-align: center;\n}\n\n.date {\n  font-size: 10px;\n  color: gray;\n  text-align: center;\n  margin-top: 10px;\n}\n\n.main-info {\n  text-align: left;\n  margin-top: -20px;\n}\n\n.collect {\n  margin-top: 20px;\n  margin-left: 175px;\n}\n</style>\n"],"sourceRoot":"src/components"}]}